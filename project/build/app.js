/*! 2024-03-08 */
KISSY.add("UFO/util/Storage",function(t,e){return{setItem:function(t,e,n){var r=typeof n;"string"==r||"number"==r||"boolean"==r?t.setItem(e,n):t.setItem(e,JSON.stringify(n))},getItem:function(e,t){e=e.getItem(t);try{return JSON.parse(e)}catch(t){return e}},setLocalItem:function(t,e){this.setItem(localStorage,t,e)},getLocalItem:function(t){return this.getItem(localStorage,t)},setSessionItem:function(t,e){this.setItem(sessionStorage,t,e)},getSessionItem:function(t){return this.getItem(sessionStorage,t)}}},{requires:["node"]}),KISSY.add("app/util/ParamUtil",function(r){return{processParam:function(t){for(var e in t){var n=t[e];r.isArray(n)&&(t[e]=n[0])}return t}}}),KISSY.add("UFO/core/lang/Number",function(t){return{toSignedNumberString:function(t,e){return 0<t?"+"+String(t):0==t?(e||"")+String(t):String(t)},toHex:function(t){return t.toString(16)},toAmountWords:function(t){for(var e=["","万","亿"],n=["拾","佰","仟"],r=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],o=String(t).split("."),a=0,i=0,s=0,u="",m=0,c=1,g=o[0].length;c<=g;c++){var m=o[0].charAt(g-c),d=0;0<=g-c-1&&(d=o[0].charAt(g-c-1)),0!=(s+=Number(m))&&(u=r[Number(m)].concat(u),"0"==m)&&(s=0),0<=g-c-1&&(3!=a?(0!=d&&(u=n[a].concat(u)),a++):("万"!=u.charAt(a=0)&&"亿"!=u.charAt(0)||(u=u.substr(1,u.length-1)),u=e[i].concat(u),s=0)),3==a&&i++}return u+="元",o[1]?(0!=(m=o[1].charAt(0))&&(u+=r[Number(m)]+"角"),0!=(m=o[1].charAt(1))&&(u+=r[Number(m)]+"分")):u+="整",u}}}),KISSY.add("UFO/core/lang/Date",function(t,i){return{getMonthName:function(t,e){return(!0===e?["&#74;&#97;&#110;","&#70;&#101;&#98;","&#77;&#97;&#114;","&#65;&#112;&#114;","&#77;&#97;&#121;","&#74;&#117;&#110;","&#74;&#117;&#108;","&#65;&#117;&#103;","&#83;&#101;&#112;","&#79;&#99;&#116;","&#78;&#111;&#118;","&#68;&#101;&#99;"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"])[t.getMonth()]},getWeekName:function(t,e){return(!0===e?["&#83;&#117;&#110;","&#77;&#111;&#110;","&#84;&#117;&#101;","&#87;&#101;&#100;","&#84;&#104;&#117;&#114;","&#70;&#114;&#105;","&#83;&#97;&#116;"]:["Sun","Mon","Tue","Wed","Thur","Fri","Sat"])[t.getDay()]},format:function(t,e){if(!t)return"";e=e||"yyyy-MM-dd mm:ss";var n,r,o,a={TZ:i.toSignedNumberString(parseInt(-t.getTimezoneOffset()/60)),"q+":Math.floor((t.getMonth()+3)/3),"y+":t.getFullYear(),MN:this.getMonthName(t,!0),"M+":t.getMonth()+1,"d+":t.getDate(),WN:this.getWeekName(t),"h+":t.getHours(),"H+":(n=t.getHours())<13?n:n-12,"m+":t.getMinutes(),MP:t.getMinutes()-(new Date).getMinutes(),"s+":t.getSeconds(),DP:t.getHours()<12?"AM":"PM"};for(r in a)new RegExp("("+r+")").test(e)&&(o=RegExp.$1,e=e.replace(o,function(){return"yy"===o?a[r]%100:1<o.length&&"number"==typeof a[r]&&-1<a[r]&&a[r]<10?"0"+a[r]:a[r]}));return e}}},{requires:["./Number"]}),KISSY.add("app/util/XTemplateUtil",function(o,t,a){return t.addCommand("getImgAbsolutePath",function(t,e){e=e.params[0];return e?"../resources/img/"+e:"../resources/img/default_product.png"}),t.addCommand("formatPrice",function(t,e){return Number(e.params[0]).toFixed(2)}),t.addCommand("formatDateTime",function(t,e){var n=e.params[0],r="yyyy-MM-dd";return o.isNumber(n)&&(n=new Date(n)),2===e.params.length&&(r=e.params[1]),a.format(n,r)}),t.addCommand("fixedDigits",function(t,e){var n=2;return 2===e.params.length&&(n=e.params[1]),Number(e.params[0]).toFixed(n)}),t.addCommand("join",function(t,e){var n=",";return 2===e.params.length&&(n=e.params[1]),e.params[0].join(n)}),t.addCommand("getHost",function(t,e){return location.host}),t.addCommand("encodeURIComponent",function(t,e){return encodeURIComponent(e.params[0])}),{}},{requires:["xtemplate","UFO/core/lang/Date"]}),KISSY.add("app/app",function(t,e,n,r){var o=n.processParam(t.unparam(decodeURIComponent(location.search.slice(1)))),a=(navigator.userAgent.toLowerCase(),"yql_user"),n=void 0;return 0<(t=location.pathname.lastIndexOf("build/"))?n=location.pathname.substring(0,t)+"build/data":0<(t=location.pathname.lastIndexOf("src/"))&&(n=location.pathname.substring(0,t)+"src/data"),console.log("api_path",n),{API_HOST:location.protocol+"//"+location.host+n,IMG_BASE_URL:"./resources/img",VERSION:"1.0.0",setSessionUser:function(t){e.setSessionItem(a,t)},getSessionUser:function(){return e.getSessionItem(a)},isLogined:function(){return!!this.getSessionUser()},getParam:function(){return o},isMicroMessenger:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},notifyApp:function(t,e){var n,r=navigator.userAgent;"micromessenger"==r.toLowerCase().match(/MicroMessenger/i)?window.location="down.html":(r.match(/(iPhone|iPod|iPad);?/i)?window.location=t:r.match(/android/i)&&(window.location=e),n=+new Date,setTimeout(function(){window.document.webkitHidden||setTimeout(function(){+new Date-n<2e3&&(window.location="down.html")},500)},500))}}},{requires:["UFO/util/Storage","./util/ParamUtil","./util/XTemplateUtil"]});