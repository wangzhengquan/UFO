/*! 2024-03-08 */
KISSY.add("UFO/EventSupport",function(o){function i(t,e){for(var i=0,n=e.length;i<n;i++){for(var s=e[i],a=0,r=0;a<t.length;a++)t[a]!=s&&(t[r++]=t[a]);t.length=r}}function t(t){this.listeners=this.listeners||{},this.oneTimeListeners=this.oneTimeListeners||{}}return UFO.augment(t,{on:function(t,e){var i=this.listeners[t]||[];return(i=o.isArray(i)?i:[i]).push(e),this.listeners[t]=i,this},off:function(t,e){return this.listeners[t]&&i(this.listeners[t],e),this.oneTimeListeners[t]&&i(this.oneTimeListeners[t],e),this},one:function(t,e){return this.oneTimeListeners[t]=this.oneTimeListeners[t]||[],this.oneTimeListeners[t].push(e),this},fire:function(){var t=[],e=arguments[0],i=Array.prototype.slice.call(arguments,1),n=this.listeners[e],s=this.oneTimeListeners[e];if(n)for(var a=0,r=(n=o.isArray(n)?n:[n]).length;a<r;a++)t.push(n[a].apply(this,i));if(s)for(a=0,r=(s=o.isArray(s)?s:[s]).length;a<r;a++)t.push(s[a].apply(this,i));return s=[],1==t.length?t[0]:t},fireEvent:function(){return this.fire.apply(this,arguments)},hasListener:function(t){return this.listeners[t]},relayEvents:function(t,e,i){for(var n,s=e.length,a=0;a<s;a++)n=e[a],t.on(n,this.createRelayer(i?i+n:n))},createRelayer:function(t,e){var i=this;return function(){return i.fireEvent.apply(i,[t].concat(Array.prototype.slice.apply(arguments,e||[0])))}}}),t}),KISSY.add("UFO/ComponentQuery",function(u){function r(t,e){return e.method.apply(this,[t].concat(e.args))}function o(t,e){for(var i,n=[],s=0,a=t.length,r=">"!==e;s<a;s++)(i=t[s]).getRefItems&&(n=n.concat(i.getRefItems(r)));return n}function d(t,e,i){if("*"===e)return t.slice();for(var n,s=[],a=0,r=t.length;a<r;a++)(n=t[a])&&n.isType&&n.isType(e,i)&&s.push(n);return s}function h(t,e){for(var i,n=[],s=0,a=t.length;s<a;s++)(i=t[s]).hasCls(e)&&n.push(i);return n}function p(t,e){for(var i,n=[],s=0,a=t.length;s<a;s++)(i=t[s]).getId()===e&&n.push(i);return n}var m=this,f=/^(\s?([>\^])\s?|\s|$)/,g=/^(#)?([\w\-]+|\*)(?:\((true|false)\))?/,y=[{re:/^\.([\w\-]+)(?:\((true|false)\))?/,method:d},{re:/^(?:[\[](?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]])/,method:function(t,e,i,n){for(var s,a=[],r=0,o=t.length;r<o;r++)s=t[r],(n?String(s[e])===n:s[e])&&a.push(s);return a}},{re:/^#([\w\-]+)/,method:p},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:function(t,e,i){return m.pseudos[e](t,i)}}],l=(m.Query=function(t){t=t||{},UFO.apply(this,t)},UFO.augment(m.Query,{execute:function(t){var e,i,n=this.operations,s=0,a=n.length;for(u.isArray(t)&&(i=t);s<a;s++)if(i="^"===(e=n[s]).mode?function(t){for(var e,i=[],n=0,s=t.length;n<s;n++)for(e=t[n];e=e.ownerCt||e.floatParent;)i.push(e);return i}(i||[t]):e.mode?o(i||[t],e.mode):r(i||o([t]),e),s===a-1)return i;return[]},is:function(t){var e,i,n=this.operations,s=u.isArray(t)?t:[t],t=s.length,a=n[n.length-1];if((s=r(s,a)).length!==t)return!1;if(1<n.length)for(i=0,e=s.length;i<e;i++)if(-1===u.indexOf(this.execute(),s[i]))return!1;return!0}}),{cache:{},pseudos:{not:function(t,e){for(var i,n=l,s=0,a=t.length,r=[],o=-1;s<a;++s)i=t[s],n.is(i,e)||(r[++o]=i);return r},first:function(t){var e=[];return 0<t.length&&e.push(t[0]),e},last:function(t){var e=t.length,i=[];return 0<e&&i.push(t[e-1]),i}},query:function(t,e){for(var i,n,s,a=t.split(","),r=a.length,o=0,l=[],c=[],d={};o<r;o++)t=u.trim(a[o]),i=this.cache[t]||(this.cache[t]=this.parse(t)),l=l.concat(i.execute(e));if(1<(n=l.length)){for(o=0;o<n;o++)s=l[o],console.log("cmp.id",s.id),d[s.id]||(c.push(s),d[s.id]=!0);l=c}return l},is:function(t,e){if(!e)return!0;for(var i=e.split(","),n=i.length,s=0;s<n;s++)if(e=u.trim(i[s]),(this.cache[e]||(this.cache[e]=this.parse(e))).is(t))return!0;return!1},parse:function(t){for(var e,i,n,s,a,r,o,l=[],c=y.length;t&&e!==t;){for((i=(e=t).match(g))&&(n=i[1],l.push("#"===n?{method:p,args:[u.trim(i[2])]}:"."===n?{method:h,args:[u.trim(i[2])]}:{method:d,args:[u.trim(i[2]),Boolean(i[3])]}),t=t.replace(i[0],""));!(s=t.match(f));)for(r=0;t&&r<c;r++){if(o=y[r],a=t.match(o.re),o.method,a){l.push({method:o.method,args:a.slice(1)}),t=t.replace(a[0],"");break}r===c-1&&console.error('Invalid ComponentQuery selector: "'+arguments[0]+'"')}s[1]&&(l.push({mode:s[2]||s[1]}),t=t.replace(s[0],""))}return new m.Query({operations:l})}});return l}),KISSY.add("UFO/Component",function(n,t,e,i){var s="<div></div>";function a(t){this.config=t||{},n.mix(this,t,!0,void 0,!0),this.id=n.guid(),this.tplId&&(s=this.tpl=n.one("#"+this.tplId).html()),a.superclass.constructor.call(this,t),this.initComponent()}return n.extend(a,e),UFO.augment(a,{alias:"component",initComponent:function(){this.el||(s=this.tpl||s,this.el=n.all(s)),this.bodyStyle=n.mix(this.bodyStyle||{},{padding:this.bodyPadding},!0),this.getBodyContainer().css(this.bodyStyle),this.style=n.mix(this.style||{},{padding:this.padding,margin:this.margin}),this.el.css(this.style),this.cls&&this.addClass(this.cls),this.bodyCls&&this.getBodyContainer().addClass(this.bodyCls),this.attributes&&this.el.attr(this.attributes),this.addCmpEvents()},setSize:function(t,e){this.el.width(t),this.el.height(e)},toEl:function(){return this.el},getEl:function(){return this.toEl()},getTargetEl:function(){},getBodyContainer:function(){return this.el},getContentTarget:function(){return this.el},render:function(t){(t="string"==typeof t?(t=n.one("#"+t))||n.one(t):t).append(this.toEl()),this.fire("afterrender",this)},onAdded:function(t,e){this.ownerCt=t,this.fireEvent("added",this,t,e)},css:function(t,e){var i=Array.prototype.slice.call(arguments,0);return 1===i.length&&n.isString(i[0])?el.css(t):this.el.css(t,e),this},removeClass:function(t){return this.el.removeClass(t),this},addClass:function(t){return this.el.addClass(t),this},hasClass:function(t){return this.el.hasClass(t)},hasCls:function(t){return this.hasClass(t)},setDisabled:function(t){(this.disabled=t)?this.el.attr("disabled","disabled"):this.el.attr("disabled","")},show:function(){return!1!==this.fire("beforeshow")&&(this.el.show(),this.fire("show")),this},hide:function(t){var e=this;return!1!==this.fire("beforehide")&&(this.el.hide(),e.destroy&&(e.el.remove(),delete e),e.fire("hide"),t)&&t(),this},getRootContainer:function(){return this.rootContainer},getId:function(){return this.id},up:function(t){var e=this.getBubbleTarget();if(t)for(;e;e=e.getBubbleTarget())if(i.is(e,t))return e;return e},getBubbleTarget:function(){return this.ownerCt},addCmpEvents:function(){},set:function(t,e){this[t]=e},get:function(t){return this[t]},isType:function(t){return UFO.isType(this,t)}}),a},{requires:["node","./EventSupport","./ComponentQuery"]}),KISSY.add("UFO/layout/Layout",function(s){function t(t){this.initLayout()}return UFO.augment(t,{alias:"layout",initLayout:function(){this.el=[]},doLayout:function(t){if(this.clearItems(),!s.isEmptyObject(t))for(var e,i=0,n=t.length;i<n;i++)null!=(e=t[i])&&(this.el.push(e.getEl?e.getEl():e),e.fire)&&e.fire("afterrender",e)},clearItems:function(){this.el=[]},calculate:function(){},toEl:function(){return this.el}}),t}),KISSY.add("UFO/container/Container",function(r,t,e,i,n,s){var a="<div></div>";function o(t){o.superclass.constructor.call(this,t)}return r.extend(o,i),UFO.augment(o,{alias:"container",initComponent:function(){this.el||(a=this.tpl||a,this.el=r.all(a));var t=(t=this.layout)||"layout";this.setLayout(t),this.initItems(),o.superclass.initComponent.apply(this,arguments)},updateLayout:function(){this.layout.doLayout(this.items),this.getBodyContainer().html("");for(var t,e=this.layout.toEl(),i=0,n=(e=r.isArray(e)?e:[e]).length;i<n;i++)t=e[i],this.getBodyContainer().append(t)},initItems:function(){var t;this.items&&(t=this.items,r.isArray(t)||(t=[t]),this.items=[],this.add(t))},add:function(t,e){r.isArray(t)||(t=[t]);var i=this;if(i.items=i.items||[],!r.isEmptyObject(t))for(var n,s=0,a=t.length;s<a;s++)n=t[s],n=UFO.createItem(n,i.defaults),i.items.push(n),n&&n.onAdded&&n.onAdded(i,s),i.fireEvent("add",i,n,s);return r.isEmptyObject(this.items)||this.updateLayout(),i.items},setLayout:function(t){this.layout=UFO.create(t)},getRefItems:function(t){for(var e,i=this.items,n=i.length,s=0,a=[];s<n;s++)e=i[s],a.push(e),t&&e&&e.getRefItems&&a.push.apply(a,e.getRefItems(!0));return this.floatingItems&&a.push.apply(a,this.floatingItems),a},query:function(t){return s.query(t=t||"*",this)},down:function(t){return this.query(t)[0]||null}}),o},{requires:["node","xtemplate","../Component","../layout/Layout","../ComponentQuery"]}),KISSY.add("UFO/slider/tpl/slider-tpl",function(){return'<div class="slider" style="visibility: visible;">\n\t<div class="slider-wrapper">\n\t</div>\n\t\n\t<div class="slider-pagination">\n\t</div>\n</div>'}),KISSY.add("UFO/slider/Slider",function(h,t,e,i,n,s){function p(t){t=h.mix(t||{},{defaultIndex:0,animation:"slide",direction:"horizontal",autoSlide:!1,timeout:3e3,loop:!1,activeCls:"active",colspan:1},!1),this.lazyLoadArr=[],p.superclass.constructor.call(this,t)}return h.extend(p,n),UFO.augment(p,{alias:"slider",initComponent:function(){var t;this.el||(this.el=h.all(s)),"vertical"==this.direction?this.el.addClass("slider-vertical"):this.el.addClass("slider-horizontal"),this.sliderWrapper=this.el.one(".slider-wrapper"),this.sliderPagination=this.getSliderPagination(),this.sliderContainer?h.isString(this.sliderContainer)&&(this.sliderContainer=h.one(this.sliderContainer)):this.sliderContainer=h.one(document.body),h.isString(this.sliderContainer)&&(t=h.one("#"+this.sliderContainer),this.sliderContainer=t||h.one(this.sliderContainer)),p.superclass.initComponent.apply(this,arguments),this.init()},fixForTransitionWhenLoop:function(){var t=this.sliderSlides.item(0).clone(!0),e=this.sliderSlides.item(this.sliderSlides.length-1).clone(!0);this.sliderWrapper.append(t),this.sliderWrapper.prepend(e),this.sliderSlides=this.el.all(".slider-slide")},init:function(){this.sliderSlides=this.el.all(".slider-wrapper .slider-slide"),this.slidesLength=this.items.length,this.loop&&(this.fixForTransitionWhenLoop(),this.slidesLength=this.items.length+2),this.setSliderSize(),this.setDefaultIndex(this.defaultIndex),1<this.items.length&&this.autoSlide&&this.play()},setDefaultIndex:function(t){this.loop&&t++,this.go(t,"none")},getBodyContainer:function(){return this.sliderWrapper},setSliderSize:function(){"vertical"==this.direction?(this.slideSize=this.sliderContainer.innerHeight(),this.el.all(".slider-slide").css("height",this.slideSize)):(this.slideSize=this.sliderContainer.innerWidth(),this.sliderWrapper.width(this.slideSize*this.slidesLength),this.el.all(".slider-slide").css("width",this.slideSize))},add:function(t,e){if(!h.isEmptyObject(t)){h.isArray(t)||(t=[t]);var i,n,s,a=this,r=a.items?a.items.length:0,o=(t.length,1<r+t.length);1===r&&o&&a.sliderPagination.append(a.createSliderPaginationBullet(a.items[0],0));for(var l,c,d=0,u=t.length;d<u;d++)i=t[d],n=h.one('<div class="slider-slide" data-index="'+(r+d)+'">'),a.slideCls&&n.addClass(a.slideCls),a.lazyLoad?a.lazyLoadArr.push({content:i}):(s=UFO.createItem(i,a.defaults),n.append(s.getEl?s.getEl():s)),t[d]=n,o&&a.sliderPagination.append(a.createSliderPaginationBullet(i),r+d);return this.loop&&(l=h.clone(a.lazyLoadArr[0]),c=h.clone(a.lazyLoadArr[a.lazyLoadArr.length-1]),a.lazyLoadArr.splice(0,0,c),a.lazyLoadArr.push(l)),p.superclass.add.apply(this,arguments)}},slideTo:function(t,e,i){function n(){i&&i.call(s,s)}var s=this;h.isFunction(e)&&(i=e,e=this.animation),e=e||s.animation;({horizontal:{none:function(t){s.sliderWrapper.css({"-webkit-transition-duration":"0s","transition-duration":"0s","-webkit-transform":"translate3d("+-1*t*s.slideSize+"px,0,0)",transform:"translate3d("+-1*t*s.slideSize+"px,0,0)","-webkit-backface-visibility":"hidden","backface-visibility":"hidden",opacity:1}),n()},slide:function(t){s.sliderWrapper.css({"-webkit-transition-duration":"300ms","transition-duration":"300ms","-webkit-transform":"translate3d("+-1*t*s.slideSize+"px,0,0)",transform:"translate3d("+-1*t*s.slideSize+"px,0,0)","-webkit-backface-visibility":"hidden","backface-visibility":"hidden",opacity:1}),setTimeout(function(){n()},300)}},vertical:{none:function(t){s.sliderWrapper.css({"-webkit-transition-duration":"0s","transition-duration":"0s","-webkit-transform":"translate3d(0,"+-1*t*s.slideSize+"px,0)",transform:"translate3d(0,"+-1*t*s.slideSize+"px,0)","-webkit-backface-visibility":"hidden","backface-visibility":"hidden",opacity:1}),n()},slide:function(t){s.sliderWrapper.css({"-webkit-transition-duration":"300ms","transition-duration":"300ms","-webkit-transform":"translate3d(0,"+-1*t*s.slideSize+"px,0)",transform:"translate3d(0,"+-1*t*s.slideSize+"px,0)","-webkit-backface-visibility":"hidden","backface-visibility":"hidden",opacity:1}),setTimeout(function(){n()},300)}}})[s.direction][e](t)},go:function(t,e,i){var n;return h.isFunction(e)&&(i=e,e=this.animation),e=e||this.animation,t>=this.slidesLenght&&(t%=this.slidesLenght),t!=this.index&&(this.index=t,n=this.getRealIndex(t),this.lazyLoad&&!this.lazyLoadArr[t].loaded&&this.load(this.el.one(".slider-wrapper .slider-slide:nth-child("+(t+1)+")"),t,this.lazyLoadArr[t].content),this.slideTo(t,e,i),this.hightlightPagerBullet(n)),this},load:function(t,e,i){h.isString(i)?t.append(i):t.append(UFO.createItem(i).getEl()),this.lazyLoadArr[e].loaded=!0},getNextIndex:function(){var t=this.index+1;return t>=this.slidesLength&&(t%=this.slidesLength),t},getPreIndex:function(){var t=this.index+this.slidesLength-1;return t>=this.slidesLength&&(t%=this.slidesLength),t},next:function(t){var e=this;return e.slidesLength<2?t&&t.call(e):e.go(e.getNextIndex(),function(){if(e.loop&&e.isLast())return e.fixNextLoop(),this;t&&t.call(e)}),this},previous:function(t){var e=this;return e.slidesLength<2?t&&t.call(e):e.go(e.getPreIndex(),function(){if(e.loop&&e.isFirst())return e.fixPreLoop(),this;t&&t.call(e)}),this},isLast:function(){return this.index===this.slidesLength-1},isFirst:function(){return 0===this.index},fixNextLoop:function(){this.go(1,"none")},fixPreLoop:function(){this.go(this.slidesLength-2,"none")},play:function(){var t=this;return null!==t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){t.next().play()},Number(t.timeout)),t.stoped=!1,this},stop:function(){return clearTimeout(this.timer),this.timer=null,this.stoped=!0,this},getRealIndex:function(t){var e=t;return e=this.loop?0==t?this.items.length-1:t==this.slidesLength-1?0:t-1:e},addCmpEvents:function(){var n=this;p.superclass.addCmpEvents.apply(this,arguments),this.el.delegate("touchstart",".slider-slide",function(t){n.stop(),n.touching=!0,n.sliderWrapper.css({"-webkit-transition-duration":"0s","transition-duration":"0s"}),n.startX=t.changedTouches[0].clientX,n.startY=t.changedTouches[0].clientY,n.startPos="horizontal"==n.direction?t.changedTouches[0].clientX:t.changedTouches[0].clientY,n.startT=(new Date).getTime()}),this.el.delegate("touchend",".slider-slide",function(t){n.touching=!1;var e="horizontal"==n.direction?t.changedTouches[0].clientX:t.changedTouches[0].clientY,e=(n.delta=Math.abs(e-n.startPos),Math.abs(e)<Math.abs(n.startPos)),i=!e,i=!n.loop&&(n.isLast()&&e||n.isFirst()&&i),t=Math.abs(n.delta)<Math.abs("horizontal"==n.direction?t.changedTouches[0].clientY-n.startY:t.changedTouches[0].clientX-n.startX);i||t||!(n.delta>n.slideSize/2||(new Date).getTime()-n.startT<550&&10<n.delta)?n.slideTo(n.index):e?n.next():n.previous(),n.autoSlide&&n.stoped&&n.play()}),this.el.delegate("touchmove",".slider-slide",function(t){var e=n.slideSize;if(!(1<t.touches.length))return n.delta="horizontal"==n.direction?t.touches[0].clientX-n.startPos:t.touches[0].clientY-n.startPos,!n.loop&&(n.isLast()&&n.delta<0||n.isFirst()&&0<n.delta)&&(n.delta=n.delta/3),Math.abs(n.delta)<Math.abs("horizontal"==n.direction?t.touches[0].clientY-n.startY:t.touches[0].clientX-n.startX)||(n.stop(),t=n.delta-n.index*e,n.lazyLoad&&n.delta<0&&(e=n.getNextIndex(),n.lazyLoadArr[e]||console.log("lazyLoadArr",n.lazyLoadArr,e),n.lazyLoadArr[e].loaded||n.load(n.el.one(".slider-wrapper .slider-slide:nth-child("+(e+1)+")"),e,n.lazyLoadArr[e].content)),n.lazyLoad&&0<n.delta&&(e=n.getPreIndex(),n.lazyLoadArr[e]||console.log("lazyLoadArr==",n.lazyLoadArr,e),n.lazyLoadArr[e].loaded||n.load(n.el.one(".slider-wrapper .slider-slide:nth-child("+(e+1)+")"),e,n.lazyLoadArr[e].content)),"horizontal"==n.direction?n.sliderWrapper.css({"-webkit-transition-duration":"0s","transition-duration":"0s","-webkit-transform":"translate3d("+t+"px,0,0)",transform:"translate3d("+t+"px,0,0)"}):n.sliderWrapper.css({"-webkit-transition-duration":"0s","transition-duration":"0s","-webkit-transform":"translate3d(0,"+t+"px,0)",transform:"translate3d(0,"+t+"px,0)"}),!1)}),e.on(window,"resize",function(t){n.setSliderSize(),n.slideTo(n.index,"none")}),this.el.delegate("click tap",".tabbar .tab",function(t){t=h.one(t.currentTarget),t=h.all(".tabbar .tab").index(t);return n.go(t),!1})},getSliderPagination:function(){return this.el.one(".slider-pagination")},createSliderPaginationBullet:function(t,e){return'<span class="slider-pagination-bullet"></span>'},hightlightPagerBullet:function(t){this.sliderPagination.all(".slider-pagination-bullet").removeClass(this.activeCls);t=this.sliderPagination.one(".slider-pagination-bullet:nth-child("+(t+1)+")");t&&t.addClass(this.activeCls)}}),p},{requires:["node","event","xtemplate","../container/Container","./tpl/slider-tpl"]}),KISSY.add("UFO/slider/tpl/tab-slider-tpl",function(){return'\t<div class="slider slider-horizontal tab-slider" style="visibility: visible;">\n\t\t\t<div class="tabbar">\n\t\t\t\t<div class="tabbar-inner">\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="tab-link-highlight-track">\n\t\t\t  \t<span class="tab-link-highlight" style="transform: translate3d(0, 0, 0);"></span>\n\t\t\t  </div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="slider-wrapper">\n\t\t\t</div>\n\t</div>'}),KISSY.add("UFO/slider/TabSlider",function(i,t,e,n,s,a){document.body;function r(t){r.superclass.constructor.call(this,t)}return i.extend(r,s),UFO.augment(r,{alias:"tabslider",initComponent:function(){this.el=i.all(a),this.el.one(".tabbar .tab-link-highlight").css("width",1/this.items.length*100+"%"),r.superclass.initComponent.apply(this,arguments)},getSliderPagination:function(){return this.el.one(".tabbar .tabbar-inner")},createSliderPaginationBullet:function(t,e){return i.substitute('<a href="javascript:;" class="tab">{title}</a>',{title:t.title})},hightlightPagerBullet:function(t){var e=100*(t=t)+"%";this.el.all(".tabbar-inner .tab").removeClass(this.activeCls),this.el.one(".tabbar-inner .tab:nth-child("+(t+1)+")").addClass(this.activeCls),this.el.one(".tabbar .tab-link-highlight").css({transform:"translate3d("+e+", 0px, 0px)","-webkit-transform":"translate3d("+e+", 0px, 0px)"})}}),r},{requires:["node","event","xtemplate","./Slider","./tpl/tab-slider-tpl"]}),KISSY.add("UFO/core/lang/Number",function(t){return{toSignedNumberString:function(t,e){return 0<t?"+"+String(t):0==t?(e||"")+String(t):String(t)},toHex:function(t){return t.toString(16)},toAmountWords:function(t){for(var e=["","万","亿"],i=["拾","佰","仟"],n=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],s=String(t).split("."),a=0,r=0,o=0,l="",c=0,d=1,u=s[0].length;d<=u;d++){var c=s[0].charAt(u-d),h=0;0<=u-d-1&&(h=s[0].charAt(u-d-1)),0!=(o+=Number(c))&&(l=n[Number(c)].concat(l),"0"==c)&&(o=0),0<=u-d-1&&(3!=a?(0!=h&&(l=i[a].concat(l)),a++):("万"!=l.charAt(a=0)&&"亿"!=l.charAt(0)||(l=l.substr(1,l.length-1)),l=e[r].concat(l),o=0)),3==a&&r++}return l+="元",s[1]?(0!=(c=s[1].charAt(0))&&(l+=n[Number(c)]+"角"),0!=(c=s[1].charAt(1))&&(l+=n[Number(c)]+"分")):l+="整",l}}}),KISSY.add("UFO/core/lang/Date",function(t,r){return{getMonthName:function(t,e){return(!0===e?["&#74;&#97;&#110;","&#70;&#101;&#98;","&#77;&#97;&#114;","&#65;&#112;&#114;","&#77;&#97;&#121;","&#74;&#117;&#110;","&#74;&#117;&#108;","&#65;&#117;&#103;","&#83;&#101;&#112;","&#79;&#99;&#116;","&#78;&#111;&#118;","&#68;&#101;&#99;"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"])[t.getMonth()]},getWeekName:function(t,e){return(!0===e?["&#83;&#117;&#110;","&#77;&#111;&#110;","&#84;&#117;&#101;","&#87;&#101;&#100;","&#84;&#104;&#117;&#114;","&#70;&#114;&#105;","&#83;&#97;&#116;"]:["Sun","Mon","Tue","Wed","Thur","Fri","Sat"])[t.getDay()]},format:function(t,e){if(!t)return"";e=e||"yyyy-MM-dd mm:ss";var i,n,s,a={TZ:r.toSignedNumberString(parseInt(-t.getTimezoneOffset()/60)),"q+":Math.floor((t.getMonth()+3)/3),"y+":t.getFullYear(),MN:this.getMonthName(t,!0),"M+":t.getMonth()+1,"d+":t.getDate(),WN:this.getWeekName(t),"h+":t.getHours(),"H+":(i=t.getHours())<13?i:i-12,"m+":t.getMinutes(),MP:t.getMinutes()-(new Date).getMinutes(),"s+":t.getSeconds(),DP:t.getHours()<12?"AM":"PM"};for(n in a)new RegExp("("+n+")").test(e)&&(s=RegExp.$1,e=e.replace(s,function(){return"yy"===s?a[n]%100:1<s.length&&"number"==typeof a[n]&&-1<a[n]&&a[n]<10?"0"+a[n]:a[n]}));return e}}},{requires:["./Number"]}),KISSY.add("app/util/XTemplateUtil",function(s,t,a){return t.addCommand("getImgAbsolutePath",function(t,e){e=e.params[0];return e?"../resources/img/"+e:"../resources/img/default_product.png"}),t.addCommand("formatPrice",function(t,e){return Number(e.params[0]).toFixed(2)}),t.addCommand("formatDateTime",function(t,e){var i=e.params[0],n="yyyy-MM-dd";return s.isNumber(i)&&(i=new Date(i)),2===e.params.length&&(n=e.params[1]),a.format(i,n)}),t.addCommand("fixedDigits",function(t,e){var i=2;return 2===e.params.length&&(i=e.params[1]),Number(e.params[0]).toFixed(i)}),t.addCommand("join",function(t,e){var i=",";return 2===e.params.length&&(i=e.params[1]),e.params[0].join(i)}),t.addCommand("getHost",function(t,e){return location.host}),t.addCommand("encodeURIComponent",function(t,e){return encodeURIComponent(e.params[0])}),{}},{requires:["xtemplate","UFO/core/lang/Date"]}),KISSY.add("UFO/lazyload/Lazyload",function(c,d,i,t){var n=c.Env.host,e=n.document,r="data-src",u="default",s="scroll",a="touchmove",o=0;function l(t,e,i){var n,s;if(t.offsetWidth)return n=!0,(n=(t=h(e,e={left:s=(e=d.offset(t)).left,top:e=e.top,right:s+((s=t)._ks_lazy_width||(s._ks_lazy_width=d.outerWidth(s))),bottom:e+((s=t)._ks_lazy_height||(s._ks_lazy_height=d.outerHeight(s)))}))&&i?h(i,e):n)&&t}function h(t,e){var i={};return i.top=Math.max(t.top,e.top),i.bottom=Math.min(t.bottom,e.bottom),i.left=Math.max(t.left,e.left),i.right=Math.min(t.right,e.right),i.top<=i.bottom&&i.left<=i.right}function p(t,e){var i=this;if(!(i instanceof p))return new p(t,e);var n=t;c.isPlainObject(n)||(n=e||{},t&&(n.container=t)),p.superclass.constructor.call(i,n),i._callbacks={},i._containerIsNotDocument=9!=i.get("container").nodeType,c.isArray(n.container)&&(i._backCompact=1),i._initLoadEvent(),n.container&&i.addElements(n.container,i.get("type")),i._loadFn(),c.ready(function(){i._loadFn()}),i.resume()}return p.ATTRS={diff:{value:0},placeholder:{value:"../../../resources/images/default_product.png"},execScript:{value:!0},container:{setter:function(t){return c.isWindow(t=t||e)?t=t.document:(t=d.get(t),"body"==d.nodeName(t)&&(t=t.ownerDocument)),t},valueFn:function(){return e}},autoDestroy:{value:!0},onStart:{value:null}},c.extend(p,t,{_initLoadEvent:function(){var t,e,i,n,s,a,r=this,o=r.get("autoDestroy");function l(){n&&(n.cancel(),n=0),s=c.now(),t.apply(i||this,arguments),a=c.now()}r._loadFn=(t=function(){o&&0==r._counter&&c.isEmptyObject(r._callbacks)&&r.destroy(),r._loadItems()},i=r,a=s=0,e=(e=100)||150,c.mix(function(){!s||s<=a&&c.now()-a>e||a<s&&c.now()-s>8*e?l():(n&&n.cancel(),n=c.later(l,e,0,null,arguments))},{stop:function(){n&&(n.cancel(),n=0)}}))},addCallback:function(t,e,i){t=d.get(t);var n=this._callbacks,t={el:t||document,fn:e||c.noop,outfn:i||c.noop},e=++o;n[e]=t,this._windowRegion?this._loadItem(e,t):this.refresh()},removeCallback:function(i,n){i=d.get(i);var s=this._callbacks;c.each(s,function(t,e){t.el!=i||n&&t.fn!=n||delete s[e]})},imgHandle:function(t){var e,i,n,s,a;e=t,i=this.get("imgFlag"),n=this.get("onStart"),i=i||r,s=e.getAttribute(i),a={type:"img",elem:e,src:s},(!c.isFunction(n)||!1!==n(a))&&a.src?(n=a.src,e.src!=n&&(e.src=n),e.removeAttribute(i)):console.log(e,s,i),this.removeElements(t)},addElements:function(t,e){"string"==typeof t?t=d.query(t):c.isArray(t)||(t=[t]);var i=this;i._counter=i._counter||0,c.each(t,function(t){e&&"img"!==e||c.each(c.filter([t].concat(d.query("img",t)),function(t){return t.getAttribute&&t.getAttribute(i.get("imgFlag")||r)},i),function(t){i.addCallback(t,i.imgHandle)})})},removeElements:function(i){"string"==typeof i?i=d.query(i):c.isArray(i)||(i=[i]);var n=this._callbacks;c.each(n,function(t,e){c.inArray(t.el,i)&&delete n[e]})},clear:function(){self._callbacks={}},refresh:function(){this._loadFn()},_loadItems:function(){var i=this,t=i.get("container");i._containerIsNotDocument&&!t.offsetWidth||(i._windowRegion=i._getBoundingRect(),!i._backCompact&&i._containerIsNotDocument&&(i._containerRegion=i._getBoundingRect(i.get("container"))),c.each(i._callbacks,function(t,e){t&&i._loadItem(e,t)}))},_loadItem:function(t,e){var i=this;if(!(e=e||i._callbacks[t]))return!0;var n=e.el,s=!1,a=e.fn,e=e.outfn;if(i.get("force")||l(n,i._windowRegion,i._containerRegion))try{s=a.call(i,n)}catch(t){setTimeout(function(){throw t},0)}else try{e.call(i,n)}catch(t){setTimeout(function(){throw t},0)}return!1!==s&&delete i._callbacks[t],s},_getBoundingRect:function(t){t=void 0!==t?(l=d.outerHeight(t),o=d.outerWidth(t),e=(t=d.offset(t)).left,t.top):(l=d.viewportHeight(),o=d.viewportWidth(),e=d.scrollLeft(),d.scrollTop());var e,i=this.get("diff"),n=0,s=i===u?o:i,a=0,r=i===u?l:i,o=e+o,l=t+l;return c.isObject(i)&&(n=i.left||0,s=i.right||0,a=i.top||0,r=i.bottom||0),{left:e-=n,top:t-=a,right:o+=s,bottom:l+=r}},pause:function(){var t,e=this._loadFn;this._destroyed||(i.remove(n,s,e),i.remove(n,a,e),i.remove(n,"resize",e),e.stop(),this._containerIsNotDocument&&(t=this.get("container"),i.remove(t,s,e),i.remove(t,a,e)))},resume:function(){var t,e=this._loadFn;this._destroyed||(i.on(n,s,e),i.on(n,a,e),i.on(n,"resize",e),this._containerIsNotDocument&&(t=this.get("container"),i.on(t,s,e),i.on(t,a,e)))},destroy:function(){this.pause(),this._callbacks={},c.log("datalazyload is destroyed!"),this.fire("destroy"),this._destroyed=1}}),p},{requires:["dom","event","base"]}),KISSY.add("UFO/popup/MessageBox",function(a,t,e,i){var n=['<div class="popup-container popup-showing active">','\t<div class="popup">','\t\t<div class="popup-head">','\t\t\t<h3 class="popup-title"></h3>',"\t\t</div>",'\t\t<div class="popup-body">',"\t\t\t<span></span>","\t\t</div>",'\t\t<div class="popup-buttons">',"\t\t</div>","\t</div>","</div>"].join(""),s=document.body;function r(t){t.buttonText=a.mix({ok:"确定",yes:"是",no:"否",cancel:"取消"},t.buttonText,!0,void 0,!0),this.buttonIds=["ok","yes","no","cancel"],t.buttons=t.buttons||1,r.superclass.constructor.call(this,t)}return a.extend(r,i),r.ERROR="error",r.INFO="info",r.QUESTION="question",r.WARNING="warning",r.OK=1,r.YES=2,r.NO=4,r.CANCEL=8,r.YESNO=r.YES|r.NO,r.OKCANCEL=r.OK|r.CANCEL,r.YESNOCANCEL=r.YES|r.NO|r.CANCEL,UFO.augment(r,{alias:"messagebox",initComponent:function(){this.el=a.one(n),this.backdrop=a.one('<div class="backdrop visible active"></div>'),this.setTitle(this.title),this.setMessage(this.msg),this.setButtons(this.buttons),r.superclass.initComponent.apply(this,arguments)},setTitle:function(t){this.title=t,this.el.one(".popup-title").html(t)},setMessage:function(t){a.isObject(t)&&(t=JSON.stringify(t)),this.msg=t,this.el.one(".popup-body span").html(t)},setButtons:function(t){this.buttons=t;for(var e,i=this.el.one(".popup-buttons"),n=3;0<=n;n--)this.buttons&Math.pow(2,n)&&(e=a.one('<button name="button-'+this.buttonIds[n]+'" class="button button-default">'+this.buttonText[this.buttonIds[n]]+"</button>"),i.append(e))},handleClickOk:function(){var t=this;t.buttonListeners&&t.buttonListeners.ok&&t.buttonListeners.ok(),t.fire("ok"),t.hide()},handleClickCancel:function(){var t=this;t.buttonListeners&&t.buttonListeners.cancel&&t.buttonListeners.cancel(),t.fire("cancel"),t.hide()},handleClickYes:function(){var t=this;t.buttonListeners&&t.buttonListeners.yes&&t.buttonListeners.yes(),t.fire("yes"),t.hide()},handleClickNo:function(){var t=this;t.buttonListeners&&t.buttonListeners.no&&t.buttonListeners.no(),t.fire("no"),t.hide()},getBodyContianer:function(){return this.el.one(".popup-body")},show:function(t){var e;!1!==this.fire("beforeshow")&&((e=a.one(s)).append(this.backdrop),e.append(this.el),this.fire("show"))},hide:function(t){var e=this;!1!==this.fire("beforehide")&&(this.backdrop.remove(),e.el.remove(),e.fire("hide"),delete e)},addCmpEvents:function(){var e=this;this.on("hide",function(){a.one(s).removeClass("modal-open"),a.one("html").removeClass("modal-open"),s.scrollTop=e.origScrollTop}),this.on("beforeshow",function(){e.origScrollTop=s.scrollTop,a.one(s).addClass("modal-open"),a.one("html").addClass("modal-open")}),this.el.delegate("click","button[name=button-ok]",function(t){return e.handleClickOk(t),!1}),this.el.delegate("click","button[name=button-cancel]",function(t){return e.handleClickCancel(t),!1}),this.el.delegate("click","button[name=button-yes]",function(t){return e.handleClickYes(t),!1}),this.el.delegate("click","button[name=button-no]",function(t){return e.handleClickNo(t),!1}),r.superclass.addCmpEvents.apply(this,arguments)}}),r.show=function(t){var t=new r(t),e=a.Defer();return t.show(),t.on("ok",function(){e.resolve(r.OK)}),t.on("yes",function(){e.resolve(r.YES)}),t.on("no",function(){e.resolve(r.NO)}),t.on("cancel",function(){e.resolve(r.CANCEL)}),e.promise},r.confirm=function(t,e,i,n,s){return a.isFunction(i)&&(s=n,n=i,i=void 0),r.show({title:t,icon:r.QUESTION,msg:e,buttons:r.OKCANCEL,buttonText:i,buttonListeners:{ok:n,cancel:s}})},r.alert=function(t,e,i,n){return a.isFunction(i)&&(n=i,i=void 0),r.show({title:t||"",msg:e||"",buttons:r.OK,icon:i,buttonListeners:{ok:n}})},r},{requires:["node","promise","../container/Container"]}),KISSY.add("app/product/tpl/list-tpl",function(){return'<div class="product-scroll-content scroll-content">\n\t<ul class="product-list">\n\t\t\n\t</ul>\n</div>'}),KISSY.add("app/product/tpl/list-item-tpl",function(){return'\t{{#each list}}\n\t\t{{#if type==="1"}}\n\t\t\t<li class="product-item">\n\t\t\t\t<a href="{{jump_address}}"></a><img src="{{getImgAbsolutePath img_url}}" style="width:100%;"></a>\n\t\t\t</li>\n\t\t{{else}}\n\t\t<li class="product-item">\n\t\t\t<a href="javascript:;" class="card" data-product_id="{{product_id}}">\n\t\t\t\t<div class="img-wrapper" style="{{#if ../productImgWidth}}width:{{../productImgWidth}}; height: {{../productImgHeight}};{{/if}}">\n\t\t\t\t\t{{#if tag}}\n\t\t\t\t\t<label class="product-label">{{tag}}</label>\n\t\t\t\t\t{{/if}}\n\t\t\t\t\t{{#if type==="3"}}\n\t\t\t\t\t<div class="bottom-float-layer">\n\t\t\t\t\t\t<i class="one2many-label">一对多</i> &nbsp; · &nbsp;<i>{{service_start_time}}</i> &nbsp; · &nbsp;<i>{{simple_address}}</i>&nbsp; · &nbsp; <i>已报{{apply_nums}}/{{limit_nums}}</i>\n\t\t\t\t\t</div>\n\t\t\t\t\t{{/if}}\n\t\t\t\t\t<div class="artisan-photo-wrapper">\n\t\t\t\t\t\t<img src="{{getImgAbsolutePath head_photo_url}}">\n\t\t\t\t\t</div>\n\t\t\t\t\t<img class="product-img" \n\t\t\t\t\t\t style="{{#if ../productImgWidth}} min-width:{{../productImgWidth}}; min-height: {{../productImgHeight}};{{/if}}" \n\t\t\t\t\t\t data-src="{{getImgAbsolutePath img_url}}">\n\t\t\t\t</div>\n\t\t\t\t<h2 class="product-desc">\n\t\t\t\t\t{{title}}\n\t\t\t\t</h2>\n\t\t\t\t<h3 class="artisan-desc">\n\t\t\t\t\t<span class="artisan-name">{{nick_modify}}</span>\n\t\t\t\t\t{{#if subtitle}}\n\t\t\t\t\t<span class="artisan-title">{{{subtitle}}}</span>\n\t\t\t\t\t{{/if}}\n\t\t\t\t</h3>\n\t\t\t\t<div class="price-desc">\n\t\t\t\t\t<span class="now-price">\n\t\t\t\t\t\t{{zhima_price}}<i class="unit">元</i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="old-price">\n\t\t\t\t\t\t{{market_price}}元\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t</li>\n\t\t{{/if}}\n\t{{/each}}\n'}),KISSY.add("app/tpl/spinner-loading-tpl",function(){return'\n<span class="spinner spinner-ios-small" style="text-align: center; display: block; width: 100%;"><svg\n\t\tviewBox="0 0 64 64">\n\t\t<g stroke-width="4" stroke-linecap="round">\n\t\t<line y1="12" y2="20" transform="translate(32,32) rotate(180)">\n\t\t<animate attributeName="stroke-opacity" dur="750ms"\n\t\t\tvalues="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1"\n\t\t\trepeatCount="indefinite"></animate></line>\n\t\t<line y1="12" y2="20" transform="translate(32,32) rotate(210)">\n\t\t<animate attributeName="stroke-opacity" dur="750ms"\n\t\t\tvalues="0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0"\n\t\t\trepeatCount="indefinite"></animate></line>\n\t\t<line y1="12" y2="20" transform="translate(32,32) rotate(240)">\n\t\t<animate attributeName="stroke-opacity" dur="750ms"\n\t\t\tvalues=".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1"\n\t\t\trepeatCount="indefinite"></animate></line>\n\t\t<line y1="12" y2="20" transform="translate(32,32) rotate(270)">\n\t\t<animate attributeName="stroke-opacity" dur="750ms"\n\t\t\tvalues=".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15"\n\t\t\trepeatCount="indefinite"></animate></line>\n\t\t<line y1="12" y2="20" transform="translate(32,32) rotate(300)">\n\t\t<animate attributeName="stroke-opacity" dur="750ms"\n\t\t\tvalues=".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25"\n\t\t\trepeatCount="indefinite"></animate></line>\n\t\t<line y1="12" y2="20" transform="translate(32,32) rotate(330)">\n\t\t<animate attributeName="stroke-opacity" dur="750ms"\n\t\t\tvalues=".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35"\n\t\t\trepeatCount="indefinite"></animate></line>\n\t\t<line y1="12" y2="20" transform="translate(32,32) rotate(0)">\n\t\t<animate attributeName="stroke-opacity" dur="750ms"\n\t\t\tvalues=".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45"\n\t\t\trepeatCount="indefinite"></animate></line>\n\t\t<line y1="12" y2="20" transform="translate(32,32) rotate(30)">\n\t\t<animate attributeName="stroke-opacity" dur="750ms"\n\t\t\tvalues=".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55"\n\t\t\trepeatCount="indefinite"></animate></line>\n\t\t<line y1="12" y2="20" transform="translate(32,32) rotate(60)">\n\t\t<animate attributeName="stroke-opacity" dur="750ms"\n\t\t\tvalues=".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65"\n\t\t\trepeatCount="indefinite"></animate></line>\n\t\t<line y1="12" y2="20" transform="translate(32,32) rotate(90)">\n\t\t<animate attributeName="stroke-opacity" dur="750ms"\n\t\t\tvalues=".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7"\n\t\t\trepeatCount="indefinite"></animate></line>\n\t\t<line y1="12" y2="20" transform="translate(32,32) rotate(120)">\n\t\t<animate attributeName="stroke-opacity" dur="750ms"\n\t\t\tvalues=".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85"\n\t\t\trepeatCount="indefinite"></animate></line>\n\t\t<line y1="12" y2="20" transform="translate(32,32) rotate(150)">\n\t\t<animate attributeName="stroke-opacity" dur="750ms"\n\t\t\tvalues="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1"\n\t\t\trepeatCount="indefinite"></animate></line></g></svg></span>\n'}),KISSY.add("UFO/util/Storage",function(t,e){return{setItem:function(t,e,i){var n=typeof i;"string"==n||"number"==n||"boolean"==n?t.setItem(e,i):t.setItem(e,JSON.stringify(i))},getItem:function(e,t){e=e.getItem(t);try{return JSON.parse(e)}catch(t){return e}},setLocalItem:function(t,e){this.setItem(localStorage,t,e)},getLocalItem:function(t){return this.getItem(localStorage,t)},setSessionItem:function(t,e){this.setItem(sessionStorage,t,e)},getSessionItem:function(t){return this.getItem(sessionStorage,t)}}},{requires:["node"]}),KISSY.add("app/util/ParamUtil",function(n){return{processParam:function(t){for(var e in t){var i=t[e];n.isArray(i)&&(t[e]=i[0])}return t}}}),KISSY.add("app/app",function(t,e,i,n){var s=i.processParam(t.unparam(decodeURIComponent(location.search.slice(1)))),a=(navigator.userAgent.toLowerCase(),"yql_user"),i=void 0;return 0<(t=location.pathname.lastIndexOf("build/"))?i=location.pathname.substring(0,t)+"build/data":0<(t=location.pathname.lastIndexOf("src/"))&&(i=location.pathname.substring(0,t)+"src/data"),console.log("api_path",i),{API_HOST:location.protocol+"//"+location.host+i,IMG_BASE_URL:"./resources/img",VERSION:"1.0.0",setSessionUser:function(t){e.setSessionItem(a,t)},getSessionUser:function(){return e.getSessionItem(a)},isLogined:function(){return!!this.getSessionUser()},getParam:function(){return s},isMicroMessenger:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},notifyApp:function(t,e){var i,n=navigator.userAgent;"micromessenger"==n.toLowerCase().match(/MicroMessenger/i)?window.location="down.html":(n.match(/(iPhone|iPod|iPad);?/i)?window.location=t:n.match(/android/i)&&(window.location=e),i=+new Date,setTimeout(function(){window.document.webkitHidden||setTimeout(function(){+new Date-i<2e3&&(window.location="down.html")},500)},500))}}},{requires:["UFO/util/Storage","./util/ParamUtil","./util/XTemplateUtil"]}),KISSY.add("app/Action",function(l,t,c){var d=l;return{ajax2:function(t){l.mix(t,{dataType:"json",headers:{"X-Requested-With":!1}},!1);var e=c.getSessionUser();return e&&(t.data=l.mix({user_id:e.user_id,token:e.token},t.data)),t.data=l.mix({version:c.version},t.data),d.io(t)},ajax:function(t){return t.url=c.API_HOST+t.url,this.ajax2(t)},query:function(t,e,i,n){return this.ajax({type:"GET",url:t,data:e,success:i,error:function(t){n&&n(t),alert("网络错误"),console.error(t)}})},post:function(t,e,i,n){return this.ajax({type:"post",url:t,data:e,success:i,error:function(t){n&&n(t),alert("网络错误"),console.error(t)}})},update:function(t,e,i,n){return this.post(t,e,i,n)},uploadImage2:function(t){var e=new XMLHttpRequest,i=(t.updateProgress&&e.addEventListener("progress",t.updateProgress,!1),t.success&&e.addEventListener("load",t.success,!1),t.error&&e.addEventListener("error",t.error,!1),t.transferCanceled&&e.addEventListener("abort",t.transferCanceled,!1),new FormData);i.append("uploadImage",t.file),e.open("post",c.API_HOST+"/v2/upload_image",!0),e.send(i)},postFormData:function(t,e,i,n){l.isString(t)?s={}:(t=(s=t).url,e=s.data,i=s.success,n=s.error);var s,a,r=c.getSessionUser(),o=(r&&l.mix(e,{user_id:r.user_id,token:r.token},!1),new FormData);for(a in e)o.append(a,e[a]);return l.mix(s,{type:"post",url:c.API_HOST+t,data:o,dataType:"json",headers:{"X-Requested-With":!1},cache:!1,contentType:!1,processData:!1,success:i,error:n}),d.io(s)}}},{requires:["io","./app"]}),KISSY.add("app/product/mods/List",function(c,t,i,d,a,e,n,s,u,r,o,l,h){var p=window,m=c.one(l);function f(t){f.superclass.constructor.call(this,t)}return c.extend(f,e),UFO.augment(f,{alias:"productlist",initComponent:function(){this.el=c.one(r),this.List=this.el.one("ul"),this.scrollView=this.el,this.scrollViewDom=this.scrollView.getDOMNode(),f.superclass.initComponent.apply(this,arguments),this.init()},init:function(){this.load({})},calcImgSize:function(t){var e=this.productImgWidth=this.List.width(),i=this.productImgHeight=224*this.productImgWidth/300;e?t&&t(e,i):setTimeout(function(){calcImgSize(t)},2e3)},setImgSize:function(i){var n=this;this.calcImgSize(function(t,e){n.el.all(".product-list .card .img-wrapper").css({width:t,height:e}),n.el.all(".product-list .card .img-wrapper > img").css({"min-width":t,"min-height":e}),i&&i()})},showLoadingMoreMask:function(){this.List.append(m)},removeLoadingMoreMask:function(){m.remove()},load:function(t,e){var i=this;t.offset=0,this.params=t,this.query(t,function(t){i.setImgSize(function(){i.actInview()}),t||i.addScrollListener(),e&&e(t)})},loadMore:function(e){console.log("loadmore-----");var i=this,t=this.params;t.offset=t.offset+t.page_size,this.query(t,function(t){i.actInview(),e&&e(t)})},query:function(e,i,n){var s=this;s.showLoadingMoreMask(),s.scrollViewDom.scrollTop=s.scrollViewDom.scrollTop+28,e=this.params=e||this.params,h.query("/products.json",e,function(t){console.log("query",t),s.removeLoadingMoreMask(),s.List.append(new a(o,{commands:{getProductHref:function(t,e){return"#"+e.params[0]}}}).render({list:t,productImgWidth:s.productImgWidth,productImgHeight:s.productImgHeight})),i&&i(t.length<e.page_size)},function(t){s.removeLoadingMoreMask(),n&&n(),console.log("msg",t)})},actInview:function(){var e=this,t=(e.imgLazyLoad?(e.imgLazyLoad.addElements(e.imgLazyLoad.get("container")),e.imgLazyLoad.refresh()):e.imgLazyLoad=new n({container:e.scrollView,autoDestroy:!1}),e.labelLazyload||(e.labelLazyload=new n({container:e.scrollView,autoDestroy:!1,type:"div"})),e.labelLazyload.clear(),i.query(".product-list .card .img-wrapper .product-label"));c.each(t,function(t){e.labelLazyload.addCallback(t,function(t){return i.addClass(t,"inview"),!1},function(t){i.removeClass(t,"inview")})})},addCmpEvents:function(){var t,e,i,n,s,a,r=this,o=(t=function(){r.scrollViewDom.scrollTop+r.scrollViewDom.clientHeight+p.innerHeight>=r.scrollViewDom.scrollHeight&&(r.removeScrollListener(),r.loadMore(function(t){t||r.addScrollListener()}))},a=s=0,e=(e=500)||150,c.mix(function(){!s||s<=a&&c.now()-a>e||a<s&&c.now()-s>8*e?l.apply(i,arguments):(n&&n.cancel(),n=c.later(l,e,0,i,arguments))},{stop:function(){n&&(n.cancel(),n=0)}}));function l(){n&&(n.cancel(),n=0),s=c.now(),t.apply(i||this,arguments),a=c.now()}this.addScrollListener=function(){d.on(r.scrollViewDom,"scroll",o)},this.removeScrollListener=function(){d.detach(r.scrollViewDom,"scroll",o)},this.el.delegate("click","a.card",function(t){return u.alert("alert","You are nice!"),!1}),d.on(p,"resize",function(t){r.setImgSize()})}}),f},{requires:["node","dom","event","xtemplate","UFO/Component","UFO/lazyload/Lazyload","../../util/XTemplateUtil","UFO/popup/MessageBox","../tpl/list-tpl","../tpl/list-item-tpl","../../tpl/spinner-loading-tpl","../../Action"]}),KISSY.add("app/topic/tpl/topic-list-tpl",function(){return'<div class="tab-body-person">\n \x3c!--  \n\t<form action="javascript:;" class="bar bar-header item-input-inset form-search">\n   \t<label class="item-input-wrapper">\n   \t\t<i class="icon iconfont placeholder-icon">&#xe611;</i>\n   \t\t<input type="search" placeholder="搜索高颜值手艺人">\n   \t</label>\n\t</form>\n\t --\x3e\n\t<div class="scroll-content artisan-list">\n\t\t{{#each this}}\n\t\t<a href="javascript:;" data-label_code="{{label_code}}" data-type_code="{{type_code}}" class="item item-avatar  item-icon-right" >\n\t\t  <img src="{{getImgAbsolutePath img}}">\n\t\t  <h2>{{title}}</h2>\n\t\t  <p>{{subtitle}}</p>\n\t\t  <i class="icon iconfont icon-forward"></i>\n\t\t</a>\n\t\t{{/each}}\n\t\t\n\t</div>\n</div>\t\t\t'}),KISSY.add("app/topic/mods/TopicList",function(t,e,i,n,s,a,r,o){function l(t){l.superclass.constructor.call(this,t)}return t.extend(l,s),UFO.augment(l,{alias:"topiclist",initComponent:function(){this.el=t.all(new n(o,{commands:{getPersonHref:function(t,e){return a.alert("alert","You are nice!"),url}}}).render([{title:"炫酷大玩咖",subtitle:"和有趣的人一起参与丰富好玩的线下活动",img:"topic1.jpg"},{title:"绘画艺术家",subtitle:"源于自然，发于内心的艺术作品创作者",img:"topic2.jpg"},{title:"独立音乐人",subtitle:"Let's Go 让我们一起狂欢、一起共舞",img:"topic3.jpg"},{title:"流利口语家",subtitle:"和歪国人一起交换彼此思想的世界",img:"topic4.jpg"},{title:"潮牌摄影师",subtitle:"留住青春美好，记录最灿烂的自己",img:"topic5.jpg"}])),l.superclass.initComponent.apply(this,arguments)},doSearchArtisan:function(t){a.alert("alert","You are nice!")},addCmpEvents:function(){this.el.delegate("click",".artisan-list a.item",function(t){return a.alert("alert","You are nice!"),!1})}}),l},{requires:["node","event","xtemplate","UFO/Component","UFO/popup/MessageBox","../../app","../tpl/topic-list-tpl"]}),KISSY.add("app/category/tpl/category-tpl",function(){return'<div class="scroll-content">\n\t<ul class="category-list clear-float">\n\t\t{{#each this}}\n\t\t<li class="card-item">\n\t\t\t<a href="../product/list.html" data-label_code="{{label_code}}" data-category_code="{{category_code}}" class="card-inner">\n\t\t\t\t<img src="{{getImgAbsolutePath img}}">\n\t\t\t\t<div class="cover">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3>{{title}}</h3>\n\t\t\t\t\t\t<h5>{{subtitle}}</h5>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t</li>\n\t {{/each}}\n\t</ul>\n</div>\n\t\t\t\t\n\t\t\t\t'}),KISSY.add("app/category/mods/CategoryList",function(t,e,i,n,s,a,r,o){var l=window,c=0,d=0;function u(t){u.superclass.constructor.call(this,t)}return t.extend(u,s),UFO.augment(u,{alias:"categorylist",setImgSize:function(){var t;t=((t=750<(t=l.innerWidth)?750:t)-14-12)/2,d=105*(c=t)/147,this.el.all(".category-list .card-item img").css({width:c,height:d})},initComponent:function(){this.el=t.all(new n(o,{commands:{}}).render([{title:"手绘",subtitle:"行走笔尖",img:"thing_shou_hui.jpg"},{title:"吉他",subtitle:"律动指尖",img:"thing_ji_ta.jpg"},{title:"英语",subtitle:"英伦交流",img:"thing_ying_yu.jpg"},{title:"摄影",subtitle:"一米阳光",img:"thing_she_ying.jpg"},{title:"唱歌",subtitle:"一起狂野",img:"thing_chang_ge.jpg"},{title:"油画",subtitle:"独享空间",img:"thing_you_hua.jpg"},{title:"乐器",subtitle:"酷炫风暴",img:"thing_yue_qi.jpg"},{title:"小语种",subtitle:"旅行必备",img:"thing_xiao_yu_zhong.jpg"},{title:"彩画",subtitle:"色彩世界",img:"thing_cai_hua.jpg"},{title:"手工",subtitle:"脑洞大开",img:"thing_shou_gong.jpg"}])),this.setImgSize(),u.superclass.initComponent.apply(this,arguments)},addCmpEvents:function(){var e=this;i.on(l,"resize",function(t){e.setImgSize()})}}),u},{requires:["node","event","xtemplate","UFO/Component","UFO/popup/MessageBox","../../util/XTemplateUtil","../tpl/category-tpl"]}),KISSY.add("app/home/mods/HomeTabSlider",function(s,t,e,i,n,a,r,o,l){document.body;function c(t){c.superclass.constructor.call(this,t)}return s.extend(c,n),UFO.augment(c,{alias:"gyztabslider",initComponent:function(){this.autoSlide=!1,this.loop=!1,this.lazyLoad=!0,this.items=[{title:"推荐",type:"productlist"},{title:"栏目",type:"topiclist"},{title:"类目",type:"categorylist"}],c.superclass.initComponent.apply(this,arguments)},load:function(t,e,i){var n;0===e?(this.recommendList=UFO.createItem(i),n=s.mix({page_size:5},this.param),this.recommendList.load(n),t.append(this.recommendList.getEl())):t.append(UFO.createItem(i).getEl()),this.lazyLoadArr[e].loaded=!0},addCmpEvents:function(){c.superclass.addCmpEvents.apply(this,arguments)}}),c},{requires:["node","event","xtemplate","UFO/slider/TabSlider","../../util/XTemplateUtil","../../product/mods/List","../../topic/mods/TopicList","../../category/mods/CategoryList"]});